---
title: "3:46:55 PM - November 12, 2025"
date: 2025-11-12T15:46:55.259Z
timestamp: 1762962415259
---

## Project Notes

BOTH search bugs fixed!

**Bug #1: Local Filtering** ✅ FIXED
- Changed from `ref.read(videoEventsProvider)` to `videoEventService.discoveryVideos`
- Now filters 157 cached videos correctly
- File: `lib/screens/pure/search_screen_pure.dart:123-163`

**Bug #2: NIP-50 Remote Search** ✅ FIXED  
- Added `unknownFields: {'search': query}` to Filter
- Removed client-side string filtering
- Now sends proper NIP-50 query to relay
- File: `lib/services/nostr_service.dart:1152-1175`

**Ready to Test**:
Both changes compile cleanly. Need to test with real search queries to verify:
1. Local filtering returns correct subset of 157 cached videos
2. NIP-50 query actually goes to relay.divine.video
3. Remote search returns results (if relay supports NIP-50)
